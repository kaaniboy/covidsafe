(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{57:function(e,t,a){},76:function(e,t,a){e.exports=a(97)},91:function(e,t,a){},93:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(36),s=a(34),o=a(31),c=a.n(o),l=a(40),u=a(9),m=a.n(u),d=a(11),p=a(27),v=a(28),g=a(29),f=a(30),h=a(111),y=a(114),b=a(107),w=a(12),E=a.n(w),k={Food:"utensils","Nightlife Spot":"utensils","Shop & Service":"store"};function C(){return(C=Object(d.a)(m.a.mark((function e(t,a,n){var r,i,s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?"?query=".concat(n,"&ll=").concat(t,",").concat(a):"?ll=".concat(t,",").concat(a),e.next=3,fetch("https://covidsafe.herokuapp.com/places"+r);case 3:return i=e.sent,e.next=6,i.json();case 6:return s=e.sent,o=s.sort((function(e,t){return t.location.lat-e.location.lat})),e.abrupt("return",new Promise((function(e){return e(o)})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x={retrievePlaces:function(e,t,a){return C.apply(this,arguments)},getCategoryIcon:function(e){return k[e.category]||"store"}},M=a(58),N=a(105),S=a(113),O=a(59),j=a.n(O),I=a(53),R=a(110),D=a(102),P=a(112),T=a(54),L=a.n(T);function A(){var e=Object(I.a)(["\n  mutation (\n    $placeId: String!\n    $userId: String!\n    $content: String\n    $employeeMasks: Int\n    $customerMasks: Int\n    $distancing: Int\n    $dividers: Int\n    $diningType: String\n  ) {\n    createReview(input: {\n      review: {\n        placeId: $placeId\n        userId: $userId\n        content: $content\n        employeeMasks: $employeeMasks\n        customerMasks: $customerMasks\n        distancing: $distancing\n        dividers: $dividers\n        diningType: $diningType\n      }\n    }) { clientMutationId }\n  }\n"]);return A=function(){return e},e}function F(){var e=Object(I.a)(["\n  query ($placeId: String!) {\n    allReviews(\n      condition: { placeId: $placeId }\n      orderBy: CREATED_AT_DESC\n    ) {\n      edges {\n        node {\n          id content userId\n          placeId updatedAt createdAt\n          employeeMasks customerMasks\n          distancing dividers diningType\n        }\n      }\n    }\n  }\n"]);return F=function(){return e},e}var q=L()(F()),V=L()(A()),$=new R.a({uri:"https://covidsafe.herokuapp.com/graphql"}),B=new D.a({link:$,cache:new P.a,defaultOptions:{query:{fetchPolicy:"no-cache"}}});function W(){return(W=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.query({query:q,variables:{placeId:t}});case 2:return a=e.sent,e.abrupt("return",a.data.allReviews.edges.map((function(e){return e.node})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.mutate({mutation:V,variables:t});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U={createReview:function(e){return z.apply(this,arguments)},getPlaceReviews:function(e){return W.apply(this,arguments)}},_=a(45),H=a(65),Y=2.5,J=4,K={unknown:"primary",low:"success",medium:"warning",high:"danger"},G={unknown:"",low:"normal",medium:"increased",high:"high"},Q={employeeMasks:"Employees %s wear masks.",customerMasks:"Customers %s wear masks.",distancing:"Social distancing is %s enforced.",dividers:"of reviewers say dividers are present.",diningTypes:""};function X(e,t){var a=t.map((function(t){return t[e]})).filter((function(e){return null!==e}));if(0!==a.length)return a.reduce((function(e,t){return e+t}))/a.length}function Z(e){var t=Object.values(e).filter((function(e){return void 0!==e})).length;if(0===t)return"unknown";var a=((e.employeeMasks||0)+(e.customerMasks||0)+(e.distancing||0)+(void 0===e.dividers?0:4*e.dividers+1))/t;return a<=Y?"high":a<=J?"medium":"low"}function ee(e){var t=0,a=e.reduce((function(e,a){return a.diningType?(t++,Object(H.a)({},e,Object(_.a)({},a.diningType,(e[a.diningType]||0)+1))):e}),{});if(0!==t)return a}var te={ratePlace:function(e){var t={employeeMasks:X("employeeMasks",e),customerMasks:X("customerMasks",e),distancing:X("distancing",e),dividers:X("dividers",e)};return{overallRisk:Z(t),diningTypes:ee(e),categories:t}},getCategoryMessage:function(e,t){if("diningTypes"===t)return e.diningTypes?void 0:"This category does not have any ratings yet.";if(void 0===e.categories[t])return"This category does not have any ratings yet.";var a=e.categories[t],n="almost always";return a<=Y?n="rarely":a<=J&&(n="often"),Q[t].replace("%s",n)},getCategoryRisk:function(e,t){if("diningTypes"===t||void 0===e.categories[t])return"unknown";var a=e.categories[t],n=function(e){return"dividers"===t?.25*(e-1):e},r="low";return a<=n(Y)?r="high":a<=n(J)&&(r="medium"),r},formatCategoryRating:function(e,t){return void 0===e.categories[t]?null:"dividers"===t?"".concat((100*e.categories[t]).toFixed(0),"%"):"".concat(e.categories[t].toFixed(1)," / 5")}},ae=a(32),ne=(a(88),a(103)),re=a(66);function ie(e){var t=e.place,a=e.isPanelExpanded,n=e.onToggleExpanded;return r.a.createElement("div",{className:"place-header"},r.a.createElement("div",{className:"text-center"},r.a.createElement(ae.a,{className:"chevron-icon",icon:"chevron-".concat(a?"down":"up"),color:"black",size:"2x",onClick:n})),r.a.createElement(ne.a,null,r.a.createElement(re.a,{xs:10},r.a.createElement("h5",{className:"place-name wrap-text"},t.name),r.a.createElement("p",{className:"place-address wrap-text"},t.location.address)),r.a.createElement(re.a,{xs:2},r.a.createElement(ae.a,{className:"place-icon",icon:x.getCategoryIcon(t),color:"black",size:"2x"}))))}function se(e){var t=e.risk;if("unknown"===t)return null;var a=G[t].toUpperCase()+" RISK";return r.a.createElement("div",{className:"risk-indicator bg-".concat(K[t])},r.a.createElement("p",{className:"risk-text"},a))}var oe=a(67),ce=a.n(oe);function le(e){var t=e.review,a=ce.a.utc(t.createdAt).fromNow().toUpperCase();return r.a.createElement("div",{className:"place-review",key:t.id},r.a.createElement("p",{className:"review-time"},a),r.a.createElement("p",{className:"review-text"},t.content))}function ue(e){var t=e.reviews.filter((function(e){return e.content&&""!==e.content.trim()}));return r.a.createElement("div",{className:"place-reviews-list"},0===t.length?r.a.createElement("p",{className:"no-reviews"},"This location does not have any reviews yet."):t.map((function(e){return r.a.createElement(le,{review:e,key:e.id})})))}var me=a(108),de=(a(57),a(109));function pe(e){var t=e.question,a=e.options,n=e.value,i=e.onChange;return r.a.createElement("div",{className:"radio-question"},r.a.createElement("h6",{className:"question-label"},t),r.a.createElement(ne.a,null,r.a.createElement(re.a,{xs:{span:9,offset:3},md:{span:8,offset:4}},a.map((function(e){return r.a.createElement(de.a.Check,{type:"radio",label:e.label,key:e.label,onChange:function(){return i(e.value)},checked:n===e.value})})))))}var ve=a(104),ge=[{label:"1",value:1,primaryColor:"#FA533D",secondaryColor:"#FDBAB1"},{label:"2",value:2,primaryColor:"#FB873E",secondaryColor:"#FDCFB2"},{label:"3",value:3,primaryColor:"#FAB53F",secondaryColor:"#FDE2B2"},{label:"4",value:4,primaryColor:"#B6C64C",secondaryColor:"#E2E9B9"},{label:"5",value:5,primaryColor:"#94C975",secondaryColor:"#D5E9C8"}];function fe(e){var t=e.question,a=e.leftLabel,n=e.rightLabel,i=e.value,s=e.onChange;return r.a.createElement("div",{className:"rating-question"},r.a.createElement("h6",{className:"question-label"}," ",t),r.a.createElement("div",{className:"buttons-container"},r.a.createElement("div",{className:"buttons"},r.a.createElement("p",{className:"side-label"},a),r.a.createElement(ve.a,null,ge.map((function(e){return r.a.createElement(S.a,{className:"rating-button",style:{color:i===e.value?"white":e.primaryColor,backgroundColor:i===e.value?e.primaryColor:e.secondaryColor,borderColor:e.primaryColor},variant:i===e.value?"primary":"outline-primary",key:e.label,onClick:function(){return t=e.value,void s(t===i?void 0:t);var t}},e.label)}))),r.a.createElement("p",{className:"side-label"},n))))}var he=[{label:"Dine-In",value:"dine_in"},{label:"Pick-Up",value:"pick_up"},{label:"Drive-Thru",value:"drive_thru"},{label:"None of the above",value:void 0}];function ye(e){var t=e.review,a=e.onFieldChange;return r.a.createElement("div",{className:"review-form"},r.a.createElement(pe,{question:"What dining style did you use?",options:he,value:t.diningType,onChange:function(e){return a("diningType",e)}}),r.a.createElement(fe,{question:"Do employees wear masks?",leftLabel:"None",rightLabel:"All",value:t.employeeMasks,onChange:function(e){return a("employeeMasks",e)}}),r.a.createElement(fe,{question:"Do customers wear masks?",leftLabel:"None",rightLabel:"All",value:t.customerMasks,onChange:function(e){return a("customerMasks",e)}}),r.a.createElement(fe,{question:"How carefully is social distancing enforced?",leftLabel:"Not at all",rightLabel:"Very carefully",value:t.distancing,onChange:function(e){return a("distancing",e)}}),r.a.createElement("h6",{className:"text-center"},"Any additional comments?"),r.a.createElement(de.a.Control,{value:t.content,as:"textarea",rows:3,placeholder:"Include any other details related to your visit.",onChange:function(e){return a("content",e.target.value)}}))}var be=[{label:"Yes",value:1},{label:"No",value:0},{label:"Not sure",value:void 0}];function we(e){var t=e.review,a=e.onFieldChange;return r.a.createElement("div",{className:"review-form"},r.a.createElement(pe,{question:"Does this location have dividers (eg, plexiglass) installed?",options:be,value:t.dividers,onChange:function(e){return a("dividers",e)}}),r.a.createElement(fe,{question:"Do employees wear masks?",leftLabel:"None",rightLabel:"All",value:t.employeeMasks,onChange:function(e){return a("employeeMasks",e)}}),r.a.createElement(fe,{question:"Do customers wear masks?",leftLabel:"None",rightLabel:"All",value:t.customerMasks,onChange:function(e){return a("customerMasks",e)}}),r.a.createElement(fe,{question:"How carefully is social distancing enforced?",leftLabel:"Not at all",rightLabel:"Very carefully",value:t.distancing,onChange:function(e){return a("distancing",e)}}),r.a.createElement("h6",{className:"text-center"},"Any additional comments?"),r.a.createElement(de.a.Control,{value:t.content,as:"textarea",rows:3,placeholder:"Include any other details related to your visit.",onChange:function(e){return a("content",e.target.value)}}))}var Ee=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).submitReview=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.onSubmit,a=n.state.review,n.setState({isSubmitDisabled:!0}),e.prev=3,e.next=6,U.createReview(a);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:t();case 12:case"end":return e.stop()}}),e,null,[[3,8]])}))),n.getUserId=function(){return localStorage.getItem("userId")||localStorage.setItem("userId",Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)),localStorage.getItem("userId")},n.updateReview=function(e,t){var a=n.state.review;a[e]=t,n.setState({review:a})};var r=n.props.place,i=n.getUserId();return n.state={review:{userId:i,placeId:r.id},isSubmitDisabled:!1},n}return Object(v.a)(a,[{key:"componentDidUpdate",value:function(e){if(!e.isVisible&&this.props.isVisible){var t=this.getUserId();this.setState({review:{userId:t,placeId:this.props.place.id},isSubmitDisabled:!1})}}},{key:"render",value:function(){var e=this.props,t=e.place,a=e.isVisible,n=e.onClose,i=this.state,s=i.review,o=i.isSubmitDisabled;return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backdrop"}),r.a.createElement(me.a.Dialog,{className:"review-modal",scrollable:!0},r.a.createElement(me.a.Header,{closeButton:!0,onHide:n},r.a.createElement(me.a.Title,null,"Write a Review")),r.a.createElement(me.a.Body,null,r.a.createElement("p",{className:"text-center"},"Answer the following questions about ",r.a.createElement("b",null,t.name),". You may leave questions unanswered."),r.a.createElement("hr",null),"Food"===t.category?r.a.createElement(ye,{review:s,onFieldChange:this.updateReview}):r.a.createElement(we,{review:s,onFieldChange:this.updateReview})),r.a.createElement(me.a.Footer,null,r.a.createElement(S.a,{onClick:this.submitReview,disabled:o},"Submit Review")))):null}}]),a}(r.a.Component),ke=(a(91),a(75)),Ce={dine_in:"Dine-In",drive_thru:"Drive-Thru",pick_up:"Pick-Up"};function xe(e){return e.diningTypes?r.a.createElement("div",null,r.a.createElement("p",{className:"text-center rating-message"},"This location offers these dining styles:"),Object.keys(Ce).map((function(t){return e.diningTypes[t]>0&&r.a.createElement("p",{className:"dining-type text-center"},r.a.createElement(ae.a,{className:"check-icon",icon:"check",color:"#00E096",size:"lg"}),Ce[t])}))):null}function Me(e){var t=e.rating,a=e.category,n=te.formatCategoryRating(t,a),i=te.getCategoryMessage(t,a),s=te.getCategoryRisk(t,a),o=n&&r.a.createElement("h4",{className:"category-rating text-center text-".concat(K[s])},n),c=i&&r.a.createElement("p",{className:"text-center rating-message"},te.getCategoryMessage(t,a));return r.a.createElement("div",{className:"category-rating-panel"},"diningTypes"===a?xe(t):o,c)}var Ne=[{name:"employeeMasks",label:"Employee Masks"},{name:"customerMasks",label:"Customer Masks"},{name:"distancing",label:"Social Distancing"},{name:"diningTypes",label:"Dining Styles"}],Se=[{name:"employeeMasks",label:"Employee Masks"},{name:"customerMasks",label:"Customer Masks"},{name:"distancing",label:"Social Distancing"},{name:"dividers",label:"Plexiglass Dividers"}];function Oe(e){var t=e.place,a=e.rating,i=Object(n.useState)("employeeMasks"),s=Object(ke.a)(i,2),o=s[0],c=s[1],l=("Food"===t.category?Ne:Se).map((function(e){return r.a.createElement(S.a,{className:"category-button",size:"sm",variant:(o===e.name?"":"outline-")+K[te.getCategoryRisk(a,e.name)],block:!0,key:e.name,onClick:function(){return c(e.name)}},e.label)}));return r.a.createElement("div",{className:"place-ratings-overview"},r.a.createElement(ne.a,null,r.a.createElement(re.a,{className:"category-buttons text-center",xs:{span:5,offset:1}},l),r.a.createElement(re.a,{xs:6},r.a.createElement(Me,{rating:a,category:o}))))}var je={categories:{},overallRisk:"unknown"},Ie=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onReviewSubmitted=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isReviewModalVisible:!1}),e.next=3,n.retrieveReviews();case 3:case"end":return e.stop()}}),e)}))),n.toggleExpanded=function(){n.setState((function(e){return{isExpanded:!e.isExpanded}}))},n.state={reviews:[],rating:je,isLoading:!1,isExpanded:!1,isReviewModalVisible:!1},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.retrieveReviews();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isActive&&this.props.isActive&&this.setState({isExpanded:!1}),t.place.id===this.props.place.id){e.next=4;break}return e.next=4,this.retrieveReviews();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveReviews",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.place,this.setState({isLoading:!0}),e.prev=2,e.next=5,U.getPlaceReviews(t.id);case 5:a=e.sent,n=te.ratePlace(a),this.setState({reviews:a,rating:n,isLoading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),this.setState({reviews:[],rating:je,isLoading:!1});case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.place,n=t.isActive,i=this.state,s=i.rating,o=i.reviews,c=i.isLoading,l=i.isExpanded,u=i.isReviewModalVisible,m=n?l?"70%":"20%":"0%";return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{place:a,isVisible:u,onClose:function(){return e.setState({isReviewModalVisible:!1})},onSubmit:this.onReviewSubmitted}),r.a.createElement(j.a,{duration:200,height:m,className:"place-panel"},r.a.createElement(M.a,{onSwiped:this.toggleExpanded},r.a.createElement(ie,{place:a,isPanelExpanded:l,onToggleExpanded:this.toggleExpanded})),c&&r.a.createElement("div",{className:"text-center"},r.a.createElement(N.a,{animation:"border",variant:"primary"})),!c&&r.a.createElement("div",{className:"scrolling-panel"},r.a.createElement(se,{risk:s.overallRisk}),r.a.createElement(Oe,{place:a,rating:s}),r.a.createElement("h5",{className:"text-center"},"Newest Reviews"),r.a.createElement("div",{className:"text-center"},r.a.createElement(S.a,{className:"text-center",variant:"outline-primary",size:"sm",onClick:function(){return e.setState({isReviewModalVisible:!0})}},"Write a Review")),r.a.createElement(ue,{reviews:o}))))}}]),a}(r.a.Component),Re=a(106);function De(e){var t=e.value,a=e.isLoading,n=e.onChange,i=e.onEnter,s=e.onClear;return r.a.createElement("div",{className:"search"},r.a.createElement(Re.a,null,r.a.createElement(de.a.Control,{className:"search-input",value:t,placeholder:"Search nearby places...",onChange:function(e){return n(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&i(t)}})),a&&r.a.createElement(N.a,{className:"loading",animation:"grow",variant:"primary"},r.a.createElement("span",{className:"sr-only"},"Loading...")),!a&&""!==t&&r.a.createElement("div",{className:"search-icon"},r.a.createElement(ae.a,{icon:"times",color:"black",size:"lg",onClick:s})))}var Pe=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={dontShowAgain:!1},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.isVisible,n=t.onClose,i=this.state.dontShowAgain;return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backdrop"}),r.a.createElement(me.a.Dialog,{className:"welcome-modal",scrollable:!0},r.a.createElement(me.a.Header,{closeButton:!0,onHide:function(){return n(i)}},r.a.createElement(me.a.Title,null,"Welcome")),r.a.createElement(me.a.Body,null,r.a.createElement("p",null,r.a.createElement("b",null,"Mask Traffic")," helps you stay safe by locating restaurants, coffee shops, and grocery stores that take proper COVID safety precautions."),r.a.createElement("p",null,"You can use the platform to view reviews of restaurants and stores based on various categories, such as whether employees wear masks. You can also submit your own reviews to help keep your local community safe.")),r.a.createElement(me.a.Footer,null,r.a.createElement(de.a.Check,{type:"checkbox",label:"Don't show this again",checked:i,onChange:function(t){return e.setState({dontShowAgain:t.target.checked})}}),r.a.createElement(S.a,{onClick:function(){return n(i)}},"I'm ready!")))):null}}]),a}(r.a.Component),Te=(a(92),a(93),E.a.icon({iconUrl:"markers/foodMarker.png",iconSize:[30,65],iconAnchor:[15,65]})),Le=E.a.icon({iconUrl:"markers/retailMarker.png",iconSize:[30,65],iconAnchor:[15,65]}),Ae=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).mapRef=null,n.showWelcomeModal=function(){"false"!==localStorage.getItem("showWelcomeModal")&&n.setState({isWelcomeModalVisible:!0})},n.onWelcomeModalClose=function(e){n.setState({isWelcomeModalVisible:!1}),e&&localStorage.setItem("showWelcomeModal","false")},n.retrievePlaces=function(){var e=Object(d.a)(m.a.mark((function e(t,a,r){var i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),e.prev=1,e.next=4,x.retrievePlaces(t,a,r);case 4:return i=e.sent,n.setState({places:i,isLoading:!1}),e.abrupt("return",i);case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0),n.setState({isLoading:!1}),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),n.search=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,r,i,s,o,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.mapRef.viewport.center,e.next=3,n.retrievePlaces(a[0],a[1],t);case 3:if(0!==(r=e.sent).length){e.next=6;break}return e.abrupt("return");case 6:i=r.map((function(e){return e.location.lat})),s=r.map((function(e){return e.location.lng})),o={lat:Math.min.apply(Math,Object(l.a)(i)),lng:Math.min.apply(Math,Object(l.a)(s))},c={lat:Math.max.apply(Math,Object(l.a)(i)),lng:Math.max.apply(Math,Object(l.a)(s))},n.mapRef.leafletElement.fitBounds(new E.a.LatLngBounds(o,c));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.selectPlace=function(e){n.setState({selectedPlace:e,isPlacePanelActive:!0})},n.state={position:{lat:33.4255,lng:-111.94},zoom:15,search:"",places:[],selectedPlace:null,isLoading:!0,isPlacePanelActive:!1,isWelcomeModalVisible:!1},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.showWelcomeModal(),navigator.geolocation.getCurrentPosition(function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.coords,r=n.latitude,i=n.longitude,t.setState({position:{lat:r,lng:i}}),e.next=4,t.search();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.position,r=n.lat,i=n.lng,e.next=3,t.retrievePlaces(r,i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.position,n=t.zoom,i=t.search,s=t.places,o=t.selectedPlace,c=t.isPlacePanelActive,l=t.isLoading,u=t.isWelcomeModalVisible;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe,{isVisible:u,onClose:this.onWelcomeModalClose}),r.a.createElement(h.a,{center:a,zoom:n,id:"map",ref:function(t){return e.mapRef=t},zoomControl:!1,onClick:function(){return e.setState({isPlacePanelActive:!1})}},r.a.createElement(y.a,{attribution:'&amp;copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.map((function(t){return r.a.createElement(b.a,{position:[t.location.lat,t.location.lng],icon:"Food"===t.category?Te:Le,key:t.id,onClick:function(){return e.selectPlace(t)}})}))),o&&r.a.createElement(Ie,{place:o,isActive:c}),r.a.createElement(De,{value:i,isLoading:l,onChange:function(t){return e.setState({search:t})},onEnter:function(t){return e.search(t)},onClear:function(){return e.setState({search:""})}}))}}]),a}(r.a.Component);a(96);i.b.add(s.d,s.f,s.e,s.a,s.c,s.b),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ae,null)),document.getElementById("root"))}},[[76,1,2]]]);